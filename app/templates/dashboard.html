{% extends 'base.html' %}
{% block content %}
<section class="py-4 text-center text-white bg-00a859 mb-4"><h1>Painel</h1></section>
<div class="col-8 mx-auto">
  {% for item in polls %}
    <h4>{{ item.poll.title }}</h4>
    <canvas id="chart-{{ loop.index0 }}"></canvas>
  {% endfor %}
</div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    {% for item in polls %}
      new Chart(
        document.getElementById('chart-{{ loop.index0 }}').getContext('2d'),
        {
          type: 'bar',
          data: {
            labels: {{ item.chart.labels | tojson }},
            datasets: [{ label: 'Votos', data: {{ item.chart.data | tojson }} }]
          }
        }
      );
    {% endfor %}
  });
</script>
{% endblock %}